# Postmanと今後の作業方針、役割分担について

## 今後の方針

Rails開発者の皆様のうち、個人個人でご依頼していない方には、ポストマンの試験を書きまくって頂きたいです。

専用のBasecampプロジェクトを立てました。
https://basecamp.com/2947346/projects/12139785

ポストマンは完璧にしておきたいです！かなり有用で、これで開発における40～50％の作業が完了させられ得る、非常に重要なものです。

インテグレーションが出来る方、「ロジックが分かっているよ」みたいな人は、そっち優先です。そうじゃない人は、ポストマンの単体のエンドポイント叩くってやつを作っていただきたい。

## 権限系に関して（Basecampプロジェクトへのjoinなど）

権限のもらい方というのがあるので、なるべくDIRや所属部署の上司じゃなくて、Adminに聞くようにしてください。

Admin一覧：
https://basecamp.com/2947346/groups/1937436

あと、雇用関係の事務があったら、そっちに聞くようにしてください。

## リファクタリング系タスクについて

リファクタリング系の方はリクエスト名の整備ですね。ポストマンで作っているリクエスト名を修正してください。

 - 名前を統一する
 - なるべく短い文字で作成する
 - 重複が無いようにする

という3つの観点を満たすようお願いします。

例えばユーザーズフォルダーに入っているのであれば、
「User」っていう文字が頭に来たりする必要は無いので除去しましょうとか、Gateway関係なら頭についてる「GW」という文字とか、そういうのを用いないようにします。

### URLについて

　エンドポイントは、それそものもがヒューマンリーダブルなので、get_a_gatewayとかそう言う言葉にするのは嫌いです。可読性のあるURLであってほしいです。英語として意味が通じるようにしてください。それが命名です。

## エンバイロンメント系タスク（環境変数）とIDの設定について

あとは、環境変数を使ってIDを用いるようにしてください。
これによって結合試験の時に「このID」「このID」「このID」…
「ユーザーならこのID」、「GatewayならこのID」と個別に使い分ける事ができます。こうすることで、簡単に環境切り替えが可能です。

こうして環境毎にそのID系を作っていく事で、ポチッと切り替えるだけで、たとえば別のプロダクションの

 - 16番のアカウント
 - 9番のユーザー
 - 21番のGateway

というふうにごそっと切り替わって、試験が出来るようになります。非常に便利です。

なので、ポストマンの今作って頂いたやつとか、ユーザー系もGateway系も単体系も全部それに従うようにしてください。

今ハードコートされているURLとか、ID系とかがあったら片っ端から変数、環境変数に置き換えるようにしていって頂きたいと思っています。

我々はメタプログラミングフレームワークを持っていまして、このポストマンのメッセージとかも全部コードジェネレーションする事になると思うので、このルールは徹底してください。

間もなく、手作業しなくても、ポストマンの全エンドポイントのリクエストに関して、コードジェネレーションフレームワーク（僕の自作のものなんですけど）から測れて、単体試験用のポストマンは全部出来るようになると思います。結合部分をちょっと書かないといけないと思いますけれども。

なので、ポストマンのリファクタリングは命名と、環境変数系と、ID系の修正というタスクがあります。

## シーリングに関して

シーリングしたいんですけど、Gatewayが試験を色々するのに、いわゆるRuby on Railsのデータベースに直接さわるシーリングとは別に、何か手で色々入れたりしますので、それをヒアリングする必要もあります。

データのその幾つかのテーブルモデル、関連性を維持しながら、例えば
「Gatewayとセンサーはこういう風にもっているんだよ」とか
「センサーとユーザーはこういう風にもっているんだよ」っていうのを持ちながら、一式持たせてあげる必要がある。

一般的にシーリングしようと思うと、大体やるような事だと思うんですけど。
彼らが作りたいよって言ったときに、作ってあげられるってする事でした。

彼らが作りたいと思った時に、例えばセンサーを増やしたいといった時とかに、或いはセンサーの値を変えたいよと思った時に、ポチって押すと必要なものがごそごそっとポストされるような感じにしておきたいなと思っております。

## プレパレーションについて

ここまでが、メーターというかリファクタリングというか、構造というか、共通部分というかに関しての話しです。あとはポストマンのプレパレーションをやろうと思っています。

プレパレーションとは、全部のユーザー系、Gateway系、管理画面系とかに関して、今付いているエンドポイントを埋めていくって言う作業のことです。未完であれば、引き続きお願いします。

## 着手の方針について

ここまでがざっくりタスクなんですけど、

 - 出来る人から
 - 出来るものを
 - 難易度の高いもの順に着手する

というルールで着手して行きたいと思います。

ちょっとタスクのアサインをいちいちという事をやっていると時間がなさそうなので、出来る方から率先して「タスク奪いまーす！」とか、Basecampで宣言して着手して頂きたいと思います。

## flowdock経由で合流された技術者の方へ（flowdockとBasecamp）

今flowdockでjoinしてくださった皆様に関しては（もしかすると未経験かもしれないんですけど）、上記の作業はBasecampでチケット管理しています。そっちにこれを聞くころには到着なさっているんじゃないかと思っているんですけど、お願いします。

Basecampにタスクがあるので、そのアサインを奪っていくような形に。奪い方分からなかったら、取り敢えずで良いので、ポストマンのリクエストを作るという事からご着手頂きたいと思っています。

これが終わったら、

 - 解析処理の自動化
 - ワークブックス

といったタスク徐々に入っていってほしいです。ですので、APIのコードとか見ておいて頂けるとあり難いです。

## 人員配備と今後の作業予定

隆藤さんとかwataruさんには、引き続き機能系やギフト系などリリース1用のミックスがまだまだあるので、そっちをご担当頂きたいです。

新規合流した方々には、テスト係数系とかポストマンとかやって頂きつつ･･･という分担で、徐々に皆さんに機能のほうもご担当いただく、という感じになっていくのかなと思っております。

あとコードジェネレーション系に、この新規合流された方の中から（多分）1名ご参加いただく事になると思います。
